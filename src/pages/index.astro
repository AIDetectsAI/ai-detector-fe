---
import Layout from "../layouts/Layout.astro";
import { Button } from "../components/button";
import { Github, Chrome } from "lucide-react";
import "../styles/login.css";
---

<Layout>
  <div class="login-container">
    <div class="login-panel">
      <h1 class="login-title">Sign In</h1>

      <form id="login-form" class="form">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required />

        <label for="password">Password</label>
        <input type="password" id="password" name="password" required />

        <Button class="login-btn w-full" type="submit">Sign In</Button>

        <div class="links">
          <a onclick="alert('Work In Progress')">Forgot password?</a>
          <a onclick="alert('Work In Progress')">Sign up</a>
        </div>
      </form>

      <div class="divider">OR</div>

      <div class="oauth-buttons">
        <a href="http://localhost:8081/oauth2/authorization/google" class="w-full">
          <Button class="oauth-btn w-full" variant="secondary">
            <Chrome class="mr-2 h-5 w-5" /> Sign in with Google
          </Button>
        </a>

        <a href="http://localhost:8081/oauth2/authorization/github" class="w-full">
          <Button class="oauth-btn w-full" variant="secondary">
            <Github class="mr-2 h-5 w-5" /> Sign in with GitHub
          </Button>
        </a>
      </div>
    </div>
  </div>

  <script>
    import("../utils/placeholder_routing.ts").then(({ handleLogin }) => {
      document.getElementById("login-form")?.addEventListener("submit", (e) => {
        e.preventDefault();
        handleLogin(e);
      });
    });
  </script>
</Layout>
